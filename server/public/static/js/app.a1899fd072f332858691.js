webpackJsonp([1],{"7jBn":function(t,e){},"8g8V":function(t,e){},"8ssE":function(t,e){},CB3V:function(t,e){},DGB9:function(t,e){},IUdP:function(t,e){},KPlA:function(t,e){},LDFW:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("C/JF"),a=s("fhbW"),r=s("1e6/"),o=s("cTzj"),i=s.n(o),c=s("7+uW"),u=s("Dd8w"),l=s.n(u),d=(s("uMhA"),s("NYxO")),p={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"profile-img"})},staticRenderFns:[]};var m={name:"MainNav",components:{ProfilePhoto:s("VU/8")({name:"ProfilePhoto"},p,!1,function(t){s("IUdP")},"data-v-38cec79c",null).exports},computed:l()({},Object(d.c)(["isLoggedIn","user"])),methods:l()({},Object(d.b)(["logout"]))},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"nav"},[s("div",{staticClass:"nav-container"},[s("span",{staticClass:"nav-brand nav-item"},[s("router-link",{attrs:{to:"/"}},[t._v("BBMB")])],1),t._v(" "),t.user?s("ProfilePhoto",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:t.user.photo?"/api/photos/"+t.user.photo:null,expression:"user.photo ? `/api/photos/${user.photo}` : null",arg:"background-image"}],staticClass:"nav-item profile-img-sm",style:{backgroundImage:!t.user.photo&&"url('/static/images/auth/error.png')",backgroundSize:"cover"}}):t._e(),t._v(" "),t.isLoggedIn?s("button",{staticClass:"nav-button nav-item",on:{click:t.logout}},[t._v("Log Out")]):t._e(),t._v(" "),t.isLoggedIn?t._e():s("router-link",{staticClass:"nav-item",attrs:{to:"/login"}},[t._v("Log In")]),t._v(" "),t.isLoggedIn?t._e():s("router-link",{staticClass:"nav-item",attrs:{to:"/signup"}},[t._v("Sign Up")])],1)])},staticRenderFns:[]};var v={name:"App",components:{MainNav:s("VU/8")(m,h,!1,function(t){s("Xzzc")},null,null).exports},created:function(){this.getCurrentUser()},methods:l()({},Object(d.b)(["getCurrentUser"]))},f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("MainNav"),this._v(" "),e("keep-alive",{attrs:{include:"CategoryPosts"}},[e("router-view")],1)],1)},staticRenderFns:[]};var g=s("VU/8")(v,f,!1,function(t){s("VVJU")},null,null).exports,b=s("/ocq"),_=s("Xxa5"),k=s.n(_),j=s("exGp"),C=s.n(j),w=s("mtWM"),x=s.n(w),y=s("PJh5"),P=s.n(y),E={name:"PostListItem",props:["post","index"],data:function(){return{liking:!1}},computed:l()({},Object(d.c)(["token","isLoggedIn"]),{date:function(){return P()(this.post.createdAt).format("MMMM D, YYYY")}}),methods:{likePost:function(){var t=this;return C()(k.a.mark(function e(){var s,n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.liking||!t.isLoggedIn){e.next=9;break}return t.liking=!0,e.next=5,x()({method:"PATCH",url:"/api/posts/"+t.post._id+"/like",headers:{authorization:t.token}});case 5:s=e.sent,n=s.data,t.$emit("like",n,t.index),t.liking=!1;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t.liking=!1;case 14:case"end":return e.stop()}},e,t,[[0,11]])}))()}}},L={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"post-list-item"},[s("div",{staticClass:"likes"},[s("font-awesome-icon",{staticClass:"sun",class:{spin:t.liking},attrs:{icon:"sun"},on:{click:t.likePost}}),t._v(" "),s("span",{staticClass:"like-count"},[t._v(t._s(t.post.likesCount))])],1),t._v(" "),s("div",{staticClass:"post-info"},[s("router-link",{staticClass:"post-link",attrs:{to:"/posts/"+t.post._id}},[s("h3",[t._v(t._s(t.post.title))])]),t._v(" "),s("span",{staticClass:"post-data"},[t._v(t._s(t.date)+" by "+t._s(t.post.author.username))])],1)])},staticRenderFns:[]};var I=s("VU/8")(E,L,!1,function(t){s("8g8V")},"data-v-eeda2692",null).exports,U={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sk-fading-circle"},[s("div",{staticClass:"sk-circle1 sk-circle"}),t._v(" "),s("div",{staticClass:"sk-circle2 sk-circle"}),t._v(" "),s("div",{staticClass:"sk-circle3 sk-circle"}),t._v(" "),s("div",{staticClass:"sk-circle4 sk-circle"}),t._v(" "),s("div",{staticClass:"sk-circle5 sk-circle"}),t._v(" "),s("div",{staticClass:"sk-circle6 sk-circle"}),t._v(" "),s("div",{staticClass:"sk-circle7 sk-circle"}),t._v(" "),s("div",{staticClass:"sk-circle8 sk-circle"}),t._v(" "),s("div",{staticClass:"sk-circle9 sk-circle"}),t._v(" "),s("div",{staticClass:"sk-circle10 sk-circle"}),t._v(" "),s("div",{staticClass:"sk-circle11 sk-circle"}),t._v(" "),s("div",{staticClass:"sk-circle12 sk-circle"})])}]};var F=s("VU/8")({name:"Spinner"},U,!1,function(t){s("LDFW")},"data-v-7907ddc0",null).exports,z={name:"Category",components:{PostListItem:I,Spinner:F},created:function(){this.getPosts()},data:function(){return{posts:null,error:""}},props:["category","src"],methods:{getPosts:function(){var t=this;return C()(k.a.mark(function e(){var s;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x()({method:"GET",url:"/api/posts/category/"+t.category+"/recent"});case 3:s=e.sent,t.posts=s.data,e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),t.posts=[],t.error="Something went wrong while getting "+t.category+" posts";case 11:case"end":return e.stop()}},e,t,[[0,7]])}))()},updateLikes:function(t,e){c.a.set(this.posts,e,t)}}},S={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"category"},[s("header",[s("h2",[t._v(t._s(t.category))]),t._v(" "),s("img",{attrs:{src:t.src,alt:"",width:"160px",height:"160px"}})]),t._v(" "),s("div",{staticClass:"posts"},[t.posts&&t.posts.length?s("div",{staticClass:"posts-list"},t._l(t.posts,function(e,n){return s("PostListItem",{key:e._id,staticClass:"recent",attrs:{index:n,post:e},on:{like:t.updateLikes}})}),1):t._e(),t._v(" "),t.posts&&!t.posts.length?s("p",{staticClass:"center"},[t._v("No posts yet.")]):t._e(),t._v(" "),null===t.posts?s("Spinner",{staticClass:"center"}):t._e()],1),t._v(" "),s("router-link",{staticClass:"see-more",attrs:{to:"/posts/category/"+t.category}},[t._v("See More")])],1)},staticRenderFns:[]};var M={name:"Home",components:{Category:s("VU/8")(z,S,!1,function(t){s("DGB9")},"data-v-1e9ded52",null).exports}},O={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container categories"},[e("Category",{attrs:{category:"discussion",src:"/static/images/categories/discussion.jpg"}}),this._v(" "),e("Category",{attrs:{category:"media",src:"/static/images/categories/media.jpg"}}),this._v(" "),e("Category",{attrs:{category:"events",src:"/static/images/categories/events.jpg"}}),this._v(" "),e("Category",{attrs:{category:"tour",src:"/static/images/categories/tour.jpg"}})],1)},staticRenderFns:[]};var V=s("VU/8")(M,O,!1,function(t){s("n+nW")},"data-v-7512f62b",null).exports,R={name:"SlideShow",data:function(){var t=["/static/images/auth/beachBoys1964.jpg","/static/images/auth/beachBoysRehearsal.jpg","/static/images/auth/edSullivanShow.jpg","/static/images/auth/mikeBrianWriting.jpg","/static/images/auth/petSoundsSinging.jpg"];return{images:t,imageIndex:Math.floor(Math.random()*t.length)}},created:function(){this.startRotation()},beforeDestroy:function(){clearInterval(this.timer)},methods:{startRotation:function(){this.timer=setInterval(this.next,8e3)},next:function(){this.imageIndex>=this.images.length-1?this.imageIndex=0:this.imageIndex+=1}}},A={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"slideshow"},t._l(t.images,function(e,n){return s("div",{key:e,staticClass:"slide",class:{fadein:n===t.imageIndex,fadeout:n===t.imageIndex-1||n===t.images.length-1&&0===t.imageIndex},style:{backgroundImage:"url("+e+")"}})}),0)},staticRenderFns:[]};var $={name:"Auth",components:{SlideShow:s("VU/8")(R,A,!1,function(t){s("CB3V")},"data-v-b511af62",null).exports},data:function(){return{randomNumer:Math.floor(3*Math.random())}}},N={render:function(){var t=this.$createElement,e=this._self._c||t;return e("main",{staticClass:"auth full-screen"},[e("div",{staticClass:"auth-form-container",class:{beach:0===this.randomNumer,city:1===this.randomNumer,farm:2===this.randomNumer}},[e("router-view")],1),this._v(" "),e("SlideShow")],1)},staticRenderFns:[]};var T=s("VU/8")($,N,!1,function(t){s("ZbrP")},"data-v-97e050c0",null).exports,D={name:"FormInput",props:["type","value","placeholder"],methods:l()({},Object(d.d)(["setError"]),{handleInput:function(t){this.$emit("input",t.target.value),this.setError("")}})},B={render:function(){var t=this.$createElement;return(this._self._c||t)("input",{attrs:{type:this.type,placeholder:this.placeholder},domProps:{value:this.value},on:{input:this.handleInput}})},staticRenderFns:[]};var q=s("VU/8")(D,B,!1,function(t){s("WaOD")},"data-v-6880e832",null).exports,H={name:"ErrorMessage",computed:l()({},Object(d.c)(["error"]))},G={render:function(){var t=this.$createElement,e=this._self._c||t;return this.error?e("p",{staticClass:"error"},[this._v(this._s(this.error))]):this._e()},staticRenderFns:[]};var W=s("VU/8")(H,G,!1,function(t){s("RTw8")},"data-v-504676b0",null).exports,X={name:"LogInForm",components:{FormInput:q,ErrorMessage:W,Spinner:F},data:function(){return{username:"",password:""}},beforeDestroy:function(){this.setError("")},computed:l()({},Object(d.c)(["isAuthLoading"])),methods:l()({},Object(d.b)(["login"]),Object(d.d)(["setError"]),{onSubmit:function(){this.login({username:this.username,password:this.password})}})},Y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[s("h1",[t._v("Welcome Back!")]),t._v(" "),s("h4",[t._v("Log In")]),t._v(" "),s("ErrorMessage",{staticClass:"text-center"}),t._v(" "),s("FormInput",{attrs:{type:"text",placeholder:"Username",disabled:t.isAuthLoading},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t._v(" "),s("FormInput",{attrs:{type:"password",placeholder:"Password",disabled:t.isAuthLoading},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),s("button",{staticClass:"btn blue",attrs:{type:"submit",disabled:t.isAuthLoading}},[t.isAuthLoading?s("Spinner",{staticClass:"btn-spinner"}):t._e(),t._v("Log In\n  ")],1)],1)},staticRenderFns:[]};var K=s("VU/8")(X,Y,!1,function(t){s("OuCD")},"data-v-533533c9",null).exports,J={name:"SignUpForm",components:{FormInput:q,ErrorMessage:W,Spinner:F},data:function(){return{username:"",password:"",confirmPassword:""}},beforeDestroy:function(){this.setError("")},computed:l()({},Object(d.c)(["isAuthLoading"])),methods:l()({},Object(d.b)(["signup"]),Object(d.d)(["setError"]),{onSubmit:function(){this.signup({username:this.username,password:this.password,confirmPassword:this.confirmPassword})}})},Z={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[s("h1",[t._v("Catch a wave!")]),t._v(" "),s("h4",[t._v("Sign Up")]),t._v(" "),s("ErrorMessage",{staticClass:"text-center"}),t._v(" "),s("FormInput",{attrs:{type:"text",placeholder:"Username",disabled:t.isAuthLoading},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t._v(" "),s("FormInput",{attrs:{type:"password",placeholder:"Password",maxlength:"50",disabled:t.isAuthLoading},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),s("FormInput",{attrs:{type:"password",placeholder:"Confirm Password",maxlength:"50",disabled:t.isAuthLoading},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}}),t._v(" "),s("button",{staticClass:"btn blue",attrs:{type:"submit",disabled:t.isAuthLoading}},[t.isAuthLoading?s("Spinner",{staticClass:"btn-spinner"}):t._e(),t._v("Sign Up\n  ")],1)],1)},staticRenderFns:[]};var Q=s("VU/8")(J,Z,!1,function(t){s("7jBn")},"data-v-aa2fe7e4",null).exports,tt=s("Gu7T"),et=s.n(tt),st={name:"CategoryPosts",components:{PostListItem:I},data:function(){return{posts:[],page:0,nextPage:!0,loading:!1,category:this.$route.params.category}},mounted:function(){this.getPosts()},activated:function(){this.category!==this.$route.params.category&&(this.posts=[],this.page=0,this.nextPage=!0,this.category=this.$route.params.category,this.getPosts()),this.scroll()},deactivated:function(){window.onscroll=null},methods:{getPosts:function(){var t=this;return C()(k.a.mark(function e(){var s;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.loading||!t.nextPage){e.next=10;break}return t.loading=!0,e.next=5,x()({method:"GET",url:"/api/posts/category/"+t.$route.params.category,params:{page:t.page+1}});case 5:s=e.sent,t.posts=[].concat(et()(t.posts),et()(s.data.posts)),t.nextPage=s.data.nextPage,t.page+=1,t.loading=!1;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),t.loading=!1;case 15:case"end":return e.stop()}},e,t,[[0,12]])}))()},updateLikes:function(t,e){c.a.set(this.posts,e,t)},scroll:function(){var t=this;window.onscroll=function(){var e=window.innerHeight,s=event.target.scrollingElement;1.25*e+s.scrollTop>=s.scrollHeight&&t.getPosts()}}}},nt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("nav",{staticClass:"secondary-nav"},[s("span",{staticClass:"brand"},[t._v(t._s(t.$route.params.category))]),t._v(" "),s("router-link",{staticClass:"btn border blue sm",attrs:{to:"/posts/category/"+t.$route.params.category+"/create"}},[t._v("\n      Create New Post\n    ")])],1),t._v(" "),t._l(t.posts,function(e,n){return s("PostListItem",{key:e._id,attrs:{post:e,index:n},on:{like:t.updateLikes}})})],2)},staticRenderFns:[]};var at=s("VU/8")(st,nt,!1,function(t){s("xI/X")},"data-v-5815778d",null).exports,rt={name:"Comment",props:["comment"],computed:{date:function(){return P()(this.comment.createdAt).format("MMMM D, YYYY")}}},ot={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"comment"},[s("header",[s("span",{staticClass:"username"},[t._v(t._s(t.comment.author.username))]),t._v(" "),s("span",{staticClass:"date"},[t._v(t._s(t.date))])]),t._v(" "),s("div",{staticClass:"body"},[t._v("\n    "+t._s(t.comment.body)+"\n  ")])])},staticRenderFns:[]};var it={name:"PostComments",components:{Comment:s("VU/8")(rt,ot,!1,function(t){s("t1i0")},"data-v-0d0cbf88",null).exports},props:["comments"]},ct={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"comments"},this._l(this.comments,function(t){return e("Comment",{key:t._id,attrs:{comment:t}})}),1)},staticRenderFns:[]};var ut=s("VU/8")(it,ct,!1,function(t){s("ZFhG")},"data-v-75fd9d33",null).exports,lt=s("Pu3l"),dt=s("7As1"),pt={name:"Editor",components:{EditorContent:lt.b,EditorMenuBar:lt.c},props:["content","editable","displayMenu"],data:function(){var t=this;return{editor:new lt.a({extensions:[new dt.a,new dt.c,new dt.d,new dt.e({levels:[1,2,3]}),new dt.g,new dt.j,new dt.k,new dt.m,new dt.n,new dt.i,new dt.b,new dt.h,new dt.l,new dt.o,new dt.f],content:this.content,editable:this.editable,onUpdate:function(e){var s=e.getHTML();t.$emit("input",s)}})}},beforeDestroy:function(){this.editor.destroy()},watch:{editable:function(){this.editor.setOptions({editable:this.editable}),this.editor.setContent(this.content),this.editor.focus("end")}}},mt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"editor"},[t.displayMenu?s("editor-menu-bar",{attrs:{editor:t.editor},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.commands,a=e.isActive;return[s("div",{staticClass:"menubar"},[s("button",{staticClass:"menubar-button",class:{"is-active":a.bold()},on:{click:n.bold}},[s("font-awesome-icon",{attrs:{icon:"bold"}})],1),t._v(" "),s("button",{staticClass:"menubar-button",class:{"is-active":a.italic()},on:{click:n.italic}},[s("font-awesome-icon",{attrs:{icon:"italic"}})],1),t._v(" "),s("button",{staticClass:"menubar-button",class:{"is-active":a.strike()},on:{click:n.strike}},[s("font-awesome-icon",{attrs:{icon:"strikethrough"}})],1),t._v(" "),s("button",{staticClass:"menubar-button",class:{"is-active":a.underline()},on:{click:n.underline}},[s("font-awesome-icon",{attrs:{icon:"underline"}})],1),t._v(" "),s("button",{staticClass:"menubar-button",class:{"is-active":a.paragraph()},on:{click:n.paragraph}},[s("font-awesome-icon",{attrs:{icon:"paragraph"}})],1),t._v(" "),s("button",{staticClass:"menubar-button",class:{"is-active":a.heading({level:1})},on:{click:function(t){return n.heading({level:1})}}},[t._v("\n        H1\n      ")]),t._v(" "),s("button",{staticClass:"menubar-button",class:{"is-active":a.heading({level:2})},on:{click:function(t){return n.heading({level:2})}}},[t._v("\n        H2\n      ")]),t._v(" "),s("button",{staticClass:"menubar-button",class:{"is-active":a.heading({level:3})},on:{click:function(t){return n.heading({level:3})}}},[t._v("\n        H3\n      ")]),t._v(" "),s("button",{staticClass:"menubar-button",class:{"is-active":a.bullet_list()},on:{click:n.bullet_list}},[s("font-awesome-icon",{attrs:{icon:"list-ul"}})],1),t._v(" "),s("button",{staticClass:"menubar-button",class:{"is-active":a.ordered_list()},on:{click:n.ordered_list}},[s("font-awesome-icon",{attrs:{icon:"list-ol"}})],1),t._v(" "),s("button",{staticClass:"menubar-button",class:{"is-active":a.blockquote()},on:{click:n.blockquote}},[s("font-awesome-icon",{attrs:{icon:"quote-right"}})],1),t._v(" "),s("button",{staticClass:"menubar-button",on:{click:n.horizontal_rule}},[s("font-awesome-icon",{attrs:{icon:"grip-horizontal"}})],1),t._v(" "),s("button",{staticClass:"menubar-button",on:{click:n.undo}},[s("font-awesome-icon",{attrs:{icon:"undo"}})],1),t._v(" "),s("button",{staticClass:"menubar-button",on:{click:n.redo}},[s("font-awesome-icon",{attrs:{icon:"redo"}})],1)])]}}],null,!1,2843691729)}):t._e(),t._v(" "),s("editor-content",{staticClass:"editor-content",class:{focus:t.editor.view.focused&&t.editable,border:t.editable},attrs:{editor:t.editor}})],1)},staticRenderFns:[]};var ht=s("VU/8")(pt,mt,!1,function(t){s("KPlA")},null,null).exports,vt={render:function(){var t=this.$createElement;return(this._self._c||t)("p",{staticClass:"notification"},[this._v(this._s(this.message))])},staticRenderFns:[]};var ft={name:"Post",components:{Editor:ht,ErrorMessage:W,FormInput:q,Notification:s("VU/8")({name:"Notification",props:["message"]},vt,!1,function(t){s("8ssE")},"data-v-56a5c00e",null).exports,Spinner:F},props:["post"],data:function(){return{liking:!1,editable:!1,content:this.post.body,contentChanged:!1,title:this.post.title,updating:!1,saved:!1}},beforeDestroy:function(){this.setError("")},watch:{content:function(){this.contentChanged=!0,this.saved=!1,this.setError("")},title:function(){this.contentChanged=!0,this.saved=!1,this.setError("")},editable:function(t){this.contentChanged=!1,t||(this.content=this.post.body,this.title=this.post.title)}},computed:l()({},Object(d.c)(["isLoggedIn","token","user"]),{date:function(){return P()(this.post.createdAt).format("MMMM D, YYYY")},displayEditorMenu:function(){return this.user&&this.post.author._id===this.user._id&&this.editable}}),methods:l()({},Object(d.d)(["setError"]),{likePost:function(){var t=this;return C()(k.a.mark(function e(){var s,n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.liking||!t.isLoggedIn){e.next=9;break}return t.liking=!0,e.next=5,x()({method:"PATCH",url:"/api/posts/"+t.post._id+"/like",headers:{authorization:t.token}});case 5:s=e.sent,n=s.data,t.$emit("likePost",n),t.liking=!1;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t.liking=!1;case 14:case"end":return e.stop()}},e,t,[[0,11]])}))()},updatePost:function(){var t=this;return C()(k.a.mark(function e(){var s;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.content&&t.title){e.next=5;break}t.setError("Must provide a title and a body."),e.next=13;break;case 5:return t.updating=!0,e.next=8,x()({method:"PATCH",url:"/api/posts/"+t.post._id,headers:{authorization:t.token},data:{title:t.title,body:t.content}});case 8:s=e.sent,t.$emit("postUpdate",s.data),t.saved=!0,t.editable=!1,t.updating=!1;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),t.setError(e.t0.response.data.message),t.updating=!1;case 19:case"end":return e.stop()}},e,t,[[0,15]])}))()},toggleEdit:function(){this.editable=!this.editable}})},gt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.saved?s("Notification",{attrs:{message:"Post changes were successfully saved."}}):t._e(),t._v(" "),s("error-message"),t._v(" "),s("div",{staticClass:"post"},[t.post?s("div",{staticClass:"post-header"},[s("div",{staticClass:"likes"},[s("font-awesome-icon",{staticClass:"sun",class:{spin:t.liking},attrs:{icon:"sun"},on:{click:t.likePost}}),t._v(" "),s("span",{staticClass:"like-count"},[t._v(t._s(t.post.likesCount))])],1),t._v(" "),s("div",{staticClass:"post-info"},[s("h3",[t._v(t._s(t.post.title))]),t._v(" "),s("span",{staticClass:"post-data"},[t._v(t._s(t.date)+" by "+t._s(t.post.author.username))])]),t._v(" "),s("div",{staticClass:"post-controls"},[t.user&&t.user._id===t.post.author._id&&!t.editable?s("button",{staticClass:"btn border red sm"},[t._v("\n          Delete\n        ")]):t._e(),t._v(" "),t.user&&t.user._id===t.post.author._id&&!t.updating?s("button",{staticClass:"btn border blue sm",on:{click:t.toggleEdit}},[t._v("\n          "+t._s(t.editable?"Cancel":"Edit")+"\n        ")]):t._e(),t._v(" "),t.user&&t.user._id===t.post.author._id&&t.editable?s("button",{staticClass:"btn border green sm",attrs:{disabled:!t.contentChanged},on:{click:t.updatePost}},[t.updating?s("Spinner",{staticClass:"btn-spinner green"}):t._e(),t._v("\n          Save\n        ")],1):t._e()])]):t._e(),t._v(" "),s("div",{staticClass:"edit-form"},[t.editable?s("div",{staticClass:"form-row"},[s("label",{attrs:{for:"title"}},[t._v("Title:")]),t._v(" "),s("form-input",{attrs:{id:"title"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1):t._e(),t._v(" "),s("div",{staticClass:"form-row"},[t.editable?s("label",{attrs:{for:"body"}},[t._v("Body:")]):t._e(),t._v(" "),s("editor",{attrs:{content:t.content,editable:t.editable,displayMenu:t.displayEditorMenu},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)])])],1)},staticRenderFns:[]};var bt={name:"PostPage",components:{Post:s("VU/8")(ft,gt,!1,function(t){s("UqjR")},"data-v-861048f0",null).exports,PostComments:ut},data:function(){return{post:!1,comments:[],commentsLoading:!0}},mounted:function(){this.getPost(),this.getPostComments()},methods:{getPost:function(){var t=this;return C()(k.a.mark(function e(){var s;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,x()({method:"GET",url:"/api/posts/"+t.$route.params.postId});case 4:s=e.sent,t.post=s.data,t.loading=!1,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t.loading=!1;case 12:case"end":return e.stop()}},e,t,[[0,9]])}))()},getPostComments:function(){var t=this;return C()(k.a.mark(function e(){var s;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.commentsLoading=!0,e.next=4,x()({method:"GET",url:"/api/posts/"+t.$route.params.postId+"/comments"});case 4:s=e.sent,t.comments=[].concat(et()(t.comments),et()(s.data.comments)),t.commentsLoading=!1,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t.commentsLoading=!1;case 12:case"end":return e.stop()}},e,t,[[0,9]])}))()},updatePost:function(t){this.post=t}}},_t={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[this.post?e("Post",{attrs:{post:this.post},on:{likePost:this.updatePost,postUpdate:this.updatePost}}):this._e(),this._v(" "),e("PostComments",{attrs:{comments:this.comments}})],1)},staticRenderFns:[]};var kt=s("VU/8")(bt,_t,!1,function(t){s("OEL8")},null,null).exports,jt={name:"CreatePost",components:{Editor:ht,ErrorMessage:W,FormInput:q,Spinner:F},data:function(){return{title:"",content:"",saving:!1}},beforeDestroy:function(){this.setError("")},watch:{title:function(){this.setError("")},content:function(){this.setError("")}},computed:l()({},Object(d.c)(["token"])),methods:l()({},Object(d.d)(["setError"]),{createPost:function(){var t=this;return C()(k.a.mark(function e(){var s;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.content&&t.title){e.next=5;break}t.setError("Must provide a title and a body."),e.next=10;break;case 5:return t.saving=!0,e.next=8,x()({method:"POST",url:"/api/posts",headers:{authorization:t.token},data:{title:t.title,body:t.content,category:t.$route.params.category}});case 8:s=e.sent,Et.push("/posts/"+s.data._id);case 10:t.saving=!1,e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),t.setError(e.t0.response.data.message),t.saving=!1;case 17:case"end":return e.stop()}},e,t,[[0,13]])}))()}})},Ct={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("error-message"),t._v(" "),s("div",{staticClass:"create-form-container"},[s("header",[s("nav",{staticClass:"secondary-nav"},[s("span",{staticClass:"brand"},[t._v("Create Post")]),t._v(" "),s("button",{staticClass:"btn border green sm",on:{click:t.createPost}},[t.saving?s("spinner",{staticClass:"btn-spinner green"}):t._e(),t._v(" Create\n        ")],1)])]),t._v(" "),s("div",{staticClass:"create-form"},[s("div",{staticClass:"form-row"},[s("label",{attrs:{for:"title"}},[t._v("Title:")]),t._v(" "),s("form-input",{attrs:{id:"title"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),s("div",{staticClass:"form-row"},[s("label",{attrs:{for:"body"}},[t._v("Body:")]),t._v(" "),s("editor",{attrs:{content:t.content,editable:!0,displayMenu:!0,id:"body"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)])])],1)},staticRenderFns:[]};var wt=s("VU/8")(jt,Ct,!1,function(t){s("V7xK")},"data-v-7d8107fe",null).exports;c.a.use(b.a);var xt,yt,Pt,Et=new b.a({mode:"history",routes:[{path:"/",component:V},{path:"/login",component:T,children:[{path:"",component:K}]},{path:"/signup",component:T,children:[{path:"",component:Q}]},{path:"/posts/category/:category",component:at},{path:"/posts/category/:category/create",component:wt},{path:"/posts/:postId",component:kt}]}),Lt=this,It={login:(Pt=C()(k.a.mark(function t(e,s){var n,a=e.commit,r=s.username,o=s.password;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r&&o){t.next=5;break}a("setError","Must provide username and password."),t.next=18;break;case 5:if(!(r.length>25)){t.next=9;break}a("setError","Username must be 25 characters or less."),t.next=18;break;case 9:return a("setAuthLoading",!0),t.next=12,x()({method:"POST",url:"/api/sessions",data:{username:r,password:o}});case 12:n=t.sent,localStorage.setItem("bbmb-token",n.data.token),a("setToken",n.data.token),a("setUser",n.data.user),a("setAuthLoading",!1),Et.push("/");case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(0),401===t.t0.response.status?a("setError","Invalid log in credentials."):a("setError","Something went wrong while logging in."),a("setAuthLoading",!1);case 24:case"end":return t.stop()}},t,Lt,[[0,20]])})),function(t,e){return Pt.apply(this,arguments)}),logout:function(t){var e=t.commit;localStorage.removeItem("bbmb-token"),e("setToken",null),e("setUser",null)},signup:(yt=C()(k.a.mark(function t(e,s){var n,a=e.commit,r=s.username,o=s.password,i=s.confirmPassword;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r&&o){t.next=5;break}a("setError","Must provide username and password."),t.next=22;break;case 5:if(!(r.length>25)){t.next=9;break}a("setError","Username must be 25 characters or less."),t.next=22;break;case 9:if(o===i){t.next=13;break}a("setError","Password does not match confirmation."),t.next=22;break;case 13:return a("setAuthLoading",!0),t.next=16,x()({method:"POST",url:"/api/users",data:{username:r,password:o}});case 16:n=t.sent,localStorage.setItem("bbmb-token",n.data.token),a("setToken",n.data.token),a("setUser",n.data.user),a("setAuthLoading",!1),Et.push("/");case 22:t.next=28;break;case 24:t.prev=24,t.t0=t.catch(0),a("setError",t.t0.response.data.message),a("setAuthLoading",!1);case 28:case"end":return t.stop()}},t,Lt,[[0,24]])})),function(t,e){return yt.apply(this,arguments)}),getCurrentUser:(xt=C()(k.a.mark(function t(e){var s,n=e.commit,a=e.state;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!a.authenticated){t.next=6;break}return t.next=4,x()({method:"GET",url:"/api/users",headers:{authorization:a.authenticated}});case 4:s=t.sent,n("setUser",s.data.user);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n("setUser",null);case 11:case"end":return t.stop()}},t,Lt,[[0,8]])})),function(t){return xt.apply(this,arguments)})},Ut={state:{authenticated:localStorage.getItem("bbmb-token"),user:null,isLoading:!1},getters:{isLoggedIn:function(t){return!!t.authenticated},user:function(t){return t.user},isAuthLoading:function(t){return t.isLoading},token:function(t){return t.authenticated}},actions:It,mutations:{setToken:function(t,e){t.authenticated=e},setUser:function(t,e){t.user=e},setAuthLoading:function(t,e){t.isLoading=e}}},Ft={state:{error:""},getters:{error:function(t){return t.error}},actions:{},mutations:{setError:function(t,e){t.error=e}}};c.a.use(d.a);var zt=new d.a.Store({modules:{auth:Ut,error:Ft}});n.c.add(a.j,a.a,a.c,a.i,a.k,a.f,a.e,a.d,a.g,a.b,a.l,a.h),c.a.component("font-awesome-icon",r.a),c.a.use(i.a,{preLoad:1.3,error:"/static/images/auth/error.png",loading:"/static/images/auth/loading.gif",attempt:1}),c.a.config.productionTip=!1,new c.a({el:"#app",router:Et,store:zt,components:{App:g},template:"<App/>"})},OEL8:function(t,e){},OuCD:function(t,e){},RTw8:function(t,e){},UqjR:function(t,e){},V7xK:function(t,e){},VVJU:function(t,e){},WaOD:function(t,e){},Xzzc:function(t,e){},ZFhG:function(t,e){},ZbrP:function(t,e){},"n+nW":function(t,e){},t1i0:function(t,e){},uMhA:function(t,e){},uslO:function(t,e,s){var n={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-SG":"oYA3","./en-SG.js":"oYA3","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./ga":"U5Iz","./ga.js":"U5Iz","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it-ch":"/E8D","./it-ch.js":"/E8D","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ku":"kI9l","./ku.js":"kI9l","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function a(t){return s(r(t))}function r(t){var e=n[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}a.keys=function(){return Object.keys(n)},a.resolve=r,t.exports=a,a.id="uslO"},"xI/X":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a1899fd072f332858691.js.map